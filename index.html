<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>Custos de Impress√£o 3D (BambuLab) ‚Äî Web App</title>
<meta content="Calculadora de custos e precifica√ß√£o para impress√£o 3D (BambuLab), baseada na planilha XLSX." name="description"/>
<link href="styles.css" rel="stylesheet"/>
</head>
<body>
<header class="topbar">
<div class="brand">
<div class="logo">üßæ</div>
<div class="titles">
<h1>Custos de Impress√£o 3D (BambuLab)</h1>
<p class="subtitle">Trabalhos ‚Ä¢ Par√¢metros ‚Ä¢ Materiais ‚Ä¢ Fornecedores ‚Ä¢ Clientes ‚Ä¢ Projetos ‚Ä¢ Resumo</p>
</div>
</div>
<div class="actions">
<button class="btn" id="btnExportJson">Exportar JSON</button>
<label class="btn ghost" for="importJsonFile">Importar JSON</label>
<input accept="application/json" hidden="" id="importJsonFile" type="file"/>
</div>
</header>
<nav aria-label="Navega√ß√£o" class="tabs">
<button class="tab active" data-tab="jobs">Trabalhos</button>
<button class="tab" data-tab="params">Par√¢metros</button>
<button class="tab" data-tab="materials">Materiais</button><button class="tab" data-tab="suppliers">Fornecedores</button>
<button class="tab" data-tab="clients">Clientes</button>
<button class="tab" data-tab="projects">Projetos</button>
<button class="tab" data-tab="summary">Resumo</button>
</nav>
<main class="container">
<section class="panel active" id="tab-jobs">
<div class="panel-header">
<h2>Trabalhos</h2>
<div class="row">
<button class="btn" id="btnAddJob">Adicionar trabalho</button>
<input class="search" id="jobSearch" placeholder="Buscar por cliente/projeto‚Ä¶"/>
</div>
</div>
<div class="full-bleed">
<div class="table-wrap">
<table class="table" id="jobsTable">
<thead>
<tr>
<th class="sticky-left">ID</th>
<th>Data</th>
<th>Cliente</th>
<th>Projeto</th>
<th>Material</th>
<th class="num">Peso (g)</th>
<th class="num">Tempo (h)</th>
<th class="num">Perda (%)</th>
<th class="num">Embalagem (R$)</th>
<th class="num">Desconto (%)</th>
<th>Pago</th>
<th>Particular</th>
<th>N√£o cobrar M√£o-de-Obra</th>
<th class="num">Pre√ßo final (R$)</th>
<th class="num">Subtotal (R$)</th>
<th class="num">Pre√ßo sugerido (R$)</th>
<th class="sticky-right"></th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
<details class="details full-bleed">
<summary>Ver colunas calculadas (detalhado)</summary>
<div class="table-wrap">
<table class="table" id="jobsDetailsTable">
<thead>
<tr>
<th class="sticky-left">ID</th>
<th class="num">Custo material</th>
<th class="num">Energia (kWh)</th>
<th class="num">Custo energia</th>
<th class="num">M√£o de obra</th>
<th class="num">Deprecia√ß√£o</th>
<th class="num">Manuten√ß√£o</th>
<th class="num">Overhead</th>
<th class="num">R$/h</th>
<th class="num">R$/g</th>
<th>Entrega</th>
<th>Pgto. estimado</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</details>
</section>
<section class="panel" id="tab-params">
<div class="panel-header">
<h2>Par√¢metros gerais</h2>
<p class="hint">Os percentuais s√£o digitados como <strong>%</strong> (ex.: 10 = 10%).</p>
</div>
<div class="grid">
<div class="card">
<h3>Energia</h3>
<div class="form">
<label>Tarifa de energia (R$/kWh)
              <input data-param="tarifa_energia" inputmode="decimal" type="text"/>
</label>
<label>Energia extra por trabalho (kWh)
              <input data-param="energia_extra_kwh" inputmode="decimal" type="text"/>
</label>
</div>
</div>
<div class="card">
<h3>Equipamento</h3>
<div class="form">
<label>Custo da impressora (R$)
              <input data-param="custo_impressora" inputmode="decimal" type="text"/>
</label>
<label>Custo do AMS Lite (R$) ‚Äî opcional
              <input data-param="custo_ams" inputmode="decimal" type="text"/>
</label>
<label>Vida √∫til (horas de impress√£o)
              <input data-param="vida_util_h" inputmode="decimal" type="text"/>
</label>
<label>Valor de revenda (R$)
              <input data-param="valor_revenda" inputmode="decimal" type="text"/>
</label>
<div class="kpi">
<div>
<div class="kpi-label">Custo total do equipamento</div>
<div class="kpi-value" id="kpiEquipTotal">‚Äî</div>
</div>
<div>
<div class="kpi-label">Deprecia√ß√£o por hora</div>
<div class="kpi-value" id="kpiDepHora">‚Äî</div>
</div>
</div>
</div>
</div>
<div class="card">
<h3>Opera√ß√£o</h3>
<div class="form">
<label>M√£o de obra (R$/hora)
              <input data-param="mao_de_obra_h" inputmode="decimal" type="text"/>
</label>
<label>Manuten√ß√£o (R$/hora)
              <input data-param="manutencao_h" inputmode="decimal" type="text"/>
</label>
<label>Overhead/administrativo (%)
              <input data-param="overhead_pct" inputmode="decimal" type="text"/>
</label>
<label>Lucro desejado (%)
              <input data-param="lucro_pct" inputmode="decimal" type="text"/>
</label>
<label>Embalagem padr√£o (R$/trabalho)
              <input data-param="embalagem_padrao" inputmode="decimal" type="text"/>
</label>
</div>
</div>
</div>
</section>
<section class="panel" id="tab-materials">
<div class="panel-header">
<h2>Materiais (filamentos)</h2>
<div class="row">
<button class="btn" id="btnAddMaterial">Adicionar material</button>
</div>
</div>
<div class="table-wrap">
<table class="table" id="materialsTable">
<thead>
<tr>
<th>Material</th>
<th>Marca/Fornecedor</th>
<th class="num">Pre√ßo (R$/kg)</th>
<th class="num">Custo (R$/g)</th>
<th class="num">Pot√™ncia m√©dia (W)</th>
<th class="num">Desperd√≠cio padr√£o (%)</th>
<th class="sticky-right"></th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
<p class="hint">O <strong>custo por grama</strong> √© calculado automaticamente (pre√ßo/kg √∑ 1000).</p>
</section><section class="panel" id="tab-suppliers">
<div class="panel-header">
<h2>Cadastro de Fornecedores</h2>
<div class="row">
<button class="btn" id="btnAddSupplier">Adicionar fornecedor</button>
</div>
</div>
<div class="table-wrap">
<table class="table" id="suppliersTable">
<thead>
<tr>
<th>Fornecedor</th>
<th>Contato</th>
<th>Link</th>
<th>√öltima compra</th>
<th class="num">Valor √∫ltima compra (R$)</th>
<th>Avalia√ß√£o</th>
<th class="num">Prazo m√©dio (dias)</th>
<th class="num">Frete m√©dio (R$)</th>
<th>Observa√ß√µes</th>
<th class="sticky-right"></th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
<p class="hint">Dica: use este cadastro para lembrar onde comprou, quanto pagou e como foi a qualidade do material/entrega.</p>

</section>
<section class="panel" id="tab-clients">
  <div class="panel-header">
    <h2>Cadastro de Clientes</h2>
    <div class="row">
      <button class="btn" id="btnAddClient">Adicionar cliente</button>
    </div>
  </div>
  <div class="table-wrap">
    <table class="table" id="clientsTable">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Endere√ßo</th>
          <th>Contato</th>
          <th>Observa√ß√µes</th>
          <th class="num">Total (Pre√ßo final) (R$)</th>
          <th class="sticky-right"></th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <p class="hint">Os trabalhos usam este cadastro via dropdown. O total √© calculado automaticamente somando o ‚ÄúPre√ßo final‚Äù de todos os trabalhos do cliente.</p>
</section>
<section class="panel" id="tab-projects">
  <div class="panel-header">
    <h2>Cadastro de Projetos</h2>
    <div class="row">
      <button class="btn" id="btnAddProject">Adicionar projeto</button>
    </div>
  </div>
  <div class="table-wrap">
    <table class="table" id="projectsTable">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Descri√ß√£o</th>
          <th>Link</th>
          <th class="sticky-right"></th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <p class="hint">Cadastre seus projetos para selecionar nos trabalhos (dropdown). Voc√™ pode colocar links (Drive, GitHub, WhatsApp, etc.).</p>

<section class="panel" id="tab-summary">>
<div class="panel-header">
<h2>Resumo</h2>

</div>
<div class="grid grid-2">
<div class="card">
<h3>Totais</h3>
<div class="kpi-list">
<div class="kpi-row">
<div class="kpi-label">Total de trabalhos</div>
<div class="kpi-value" id="sumJobs">‚Äî</div>
</div>
<div class="kpi-row">
<div class="kpi-label">Total Subtotal</div>
<div class="kpi-value" id="sumSubtotal">‚Äî</div>
</div>
<div class="kpi-row">
<div class="kpi-label">Total Overhead</div>
<div class="kpi-value" id="sumOverhead">‚Äî</div>
</div>
<div class="kpi-row">
<div class="kpi-label">Total Pre√ßo sugerido</div>
<div class="kpi-value" id="sumSuggested">‚Äî</div>
</div>
<div class="kpi-row">
<div class="kpi-label">Total Custo sem M√£o de Obra</div>
<div class="kpi-value" id="sumNoLabor">‚Äî</div>
</div>
<div class="kpi-row">
<div class="kpi-label">Total Devido (Pre√ßo final)</div>
<div class="kpi-value" id="sumDue">‚Äî</div>
</div>
</div>
</div>
<div class="card">
<h3>Receb√≠veis</h3>
<div class="kpi-list">
<div class="kpi-row">
<div class="kpi-label">Total Recebido (Pago = SIM)</div>
<div class="kpi-value" id="sumPaid">‚Äî</div>
</div>
<div class="kpi-row">
<div class="kpi-label">Total Atrasado (Pago = ATRASADO)</div>
<div class="kpi-value" id="sumLate">‚Äî</div>
</div>
</div>
<p class="hint">Dica: use ‚ÄúPago = ATRASADO‚Äù para cobrar depois.</p>
</div>
</div>
<div class="card chart-card">
<h3>Vis√£o mensal</h3>
<div class="legend">
<span><i class="swatch s1"></i> Custo sem M√£o de Obra</span>
<span><i class="swatch s2"></i> Total Devido</span>
<span><i class="swatch s3"></i> Total Recebido</span>
</div>
<canvas height="320" id="summaryChart"></canvas>
<p class="hint">O m√™s √© baseado na data de <strong>pagamento estimado</strong> (ajuste em ‚ÄúTrabalhos &gt; Ver colunas calculadas‚Äù).</p>
</div>

</section>
</main>
<footer class="footer">
    Feito para rodar 100% no navegador (GitHub Pages). Os dados ficam salvos localmente no seu dispositivo.
  </footer>
<script src="app.js?v=20260226_0600" defer></script>
</body>
</html>
